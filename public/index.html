<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Tracker â€” All-in-One</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">

  <!-- ========== LOGIN PAGE ========== -->
  <div id="loginPage" class="w-full max-w-md bg-white shadow-lg rounded-lg p-6">
    <h2 class="text-2xl font-bold text-center mb-4">Login</h2>
    <input id="loginUsername" class="w-full p-2 border rounded mb-2" placeholder="Username">
    <input id="loginPassword" type="password" class="w-full p-2 border rounded mb-2" placeholder="Password">
    <button onclick="login()" class="w-full bg-blue-500 text-white py-2 rounded">Login</button>
    <p class="text-sm text-center mt-2">Don't have an account? 
      <span onclick="showSignup()" class="text-blue-600 cursor-pointer">Sign Up</span>
    </p>
  </div>

  <!-- ========== SIGNUP PAGE ========== -->
  <div id="signupPage" class="hidden w-full max-w-md bg-white shadow-lg rounded-lg p-6">
    <h2 class="text-2xl font-bold text-center mb-4">Sign Up</h2>
    <input id="signupUsername" class="w-full p-2 border rounded mb-2" placeholder="Username">
    <input id="signupPassword" type="password" class="w-full p-2 border rounded mb-2" placeholder="Password">
    <button onclick="signup()" class="w-full bg-green-500 text-white py-2 rounded">Sign Up</button>
    <p class="text-sm text-center mt-2">Already have an account? 
      <span onclick="showLogin()" class="text-blue-600 cursor-pointer">Login</span>
    </p>
  </div>

  <!-- ========== DASHBOARD PAGE ========== -->
  <div id="dashboardPage" class="hidden w-full max-w-4xl bg-white shadow-lg rounded-lg p-6">
    <h2 class="text-2xl font-bold text-center mb-4">ðŸ“Š Health Tracker Dashboard</h2>

    <!-- Navigation Tabs -->
    <div class="flex space-x-4 border-b mb-4">
      <button class="tabBtn px-4 py-2" onclick="showTab('habitsTab')">Habits</button>
      <button class="tabBtn px-4 py-2" onclick="showTab('workoutsTab')">Workouts</button>
      <button class="tabBtn px-4 py-2" onclick="showTab('mealsTab')">Meals</button>
      <button class="tabBtn px-4 py-2" onclick="showTab('moodTab')">Mood</button>
      <button class="tabBtn px-4 py-2" onclick="showTab('friendsTab')">Friends</button>
    </div>

    <!-- Habits Tab -->
    <div id="habitsTab" class="tabContent">
      <textarea id="habitsInput" class="w-full p-2 border rounded mb-2" placeholder="Enter your habits..."></textarea>
      <button onclick="saveHabits()" class="bg-blue-500 text-white px-4 py-2 rounded">Save Habits</button>
    </div>

    <!-- Workouts Tab -->
    <div id="workoutsTab" class="tabContent hidden">
      <textarea id="workoutsInput" class="w-full p-2 border rounded mb-2" placeholder="Enter your workouts..."></textarea>
      <button onclick="saveWorkouts()" class="bg-blue-500 text-white px-4 py-2 rounded">Save Workouts</button>
    </div>

    <!-- Meals Tab -->
    <div id="mealsTab" class="tabContent hidden">
      <textarea id="mealsInput" class="w-full p-2 border rounded mb-2" placeholder="Enter your meals..."></textarea>
      <button onclick="saveMeals()" class="bg-blue-500 text-white px-4 py-2 rounded">Save Meals</button>
    </div>

    <!-- Mood Tab -->
    <div id="moodTab" class="tabContent hidden">
      <textarea id="moodInput" class="w-full p-2 border rounded mb-2" placeholder="How are you feeling today?"></textarea>
      <button onclick="saveMood()" class="bg-blue-500 text-white px-4 py-2 rounded">Save Mood</button>
    </div>

    <!-- Friends Tab -->
    <div id="friendsTab" class="tabContent hidden">
      <textarea id="friendsInput" class="w-full p-2 border rounded mb-2" placeholder="Track friends activities..."></textarea>
      <button onclick="saveFriends()" class="bg-blue-500 text-white px-4 py-2 rounded">Save Friends</button>
    </div>
  </div>

  <!-- ========== SCRIPT SECTION ========== -->
  <script>
    const API = "https://your-backend.onrender.com"; // ðŸ”— change to your deployed backend
    let userId = null;
    const today = new Date().toISOString().split('T')[0];

    // --- Navigation Tabs ---
    function showTab(tabId) {
      document.querySelectorAll('.tabContent').forEach(div => div.classList.add('hidden'));
      document.getElementById(tabId).classList.remove('hidden');
    }

    // --- Auth Functions ---
    function showSignup() {
      document.getElementById('loginPage').classList.add('hidden');
      document.getElementById('signupPage').classList.remove('hidden');
    }
    function showLogin() {
      document.getElementById('signupPage').classList.add('hidden');
      document.getElementById('loginPage').classList.remove('hidden');
    }

    async function login() {
      const username = document.getElementById("loginUsername").value;
      const password = document.getElementById("loginPassword").value;
      const res = await fetch(`${API}/login`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, password })
      });
      const data = await res.json();
      if (data.userId) {
        userId = data.userId;
        document.getElementById("loginPage").classList.add("hidden");
        document.getElementById("dashboardPage").classList.remove("hidden");
      } else {
        alert(data.error);
      }
    }

    async function signup() {
      const username = document.getElementById("signupUsername").value;
      const password = document.getElementById("signupPassword").value;
      const res = await fetch(`${API}/register`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ username, password })
      });
      const data = await res.json();
      if (data.userId) {
        alert("Signup successful! Please login.");
        showLogin();
      } else {
        alert(data.error);
      }
    }

    // --- Dashboard Save Functions ---
    async function saveHabits() {
      const habits = document.getElementById("habitsInput").value;
      await fetch(`${API}/update/habits`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId, date: today, habits })
      });
      alert("âœ… Habits Saved!");
    }

    async function saveWorkouts() {
      const workouts = document.getElementById("workoutsInput").value;
      await fetch(`${API}/update/workouts`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId, date: today, workouts })
      });
      alert("âœ… Workouts Saved!");
    }

    async function saveMeals() {
      const meals = document.getElementById("mealsInput").value;
      await fetch(`${API}/update/meals`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId, date: today, meals })
      });
      alert("âœ… Meals Saved!");
    }

    async function saveMood() {
      const mood = document.getElementById("moodInput").value;
      await fetch(`${API}/update/mood`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId, date: today, mood })
      });
      alert("âœ… Mood Saved!");
    }

    async function saveFriends() {
      const friends = document.getElementById("friendsInput").value;
      await fetch(`${API}/update/friends`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ userId, date: today, friends })
      });
      alert("âœ… Friends Saved!");
    }
  </script>
</body>
</html>
